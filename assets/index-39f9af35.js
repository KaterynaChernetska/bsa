var O=Object.defineProperty;var S=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var k=(e,t,n)=>(S(e,typeof t!="symbol"?t+"":t,n),n),I=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var E=(e,t,n)=>(I(e,t,"read from private field"),n?n.call(e):t.get(e)),B=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function s({tagName:e,className:t,attributes:n={}}){const a=document.createElement(e);if(t){const i=t.split(" ").filter(Boolean);a.classList.add(...i)}return Object.keys(n).forEach(i=>a.setAttribute(i,n[i])),a}const d={PlayerOneAttack:"KeyA",PlayerOneBlock:"KeyD",PlayerTwoAttack:"KeyJ",PlayerTwoBlock:"KeyL",PlayerOneCriticalHitCombination:["KeyQ","KeyW","KeyE"],PlayerTwoCriticalHitCombination:["KeyU","KeyI","KeyO"]};async function A(e,t){return new Promise(n=>{const a={...e,isBlocking:!1,side:"left",currentHealth:100,lastCriticalStrikeTime:0,allowToBlock:!0,KeyQ:!1,KeyW:!1,KeyE:!1},i={...t,isBlocking:!1,side:"right",currentHealth:100,lastCriticalStrikeTime:0,allowToBlock:!0,KeyU:!1,KeyI:!1,KeyO:!1};function o(r,c){const m=Date.now();if((r.KeyQ&&r.KeyW&&r.KeyE||r.KeyU&&r.KeyI&&r.KeyO)&&m-r.lastCriticalStrikeTime>=1e4){r.lastCriticalStrikeTime=m,c.allowToBlock=!1;const g=r.attack*2,f=document.querySelector(`#${c.side}-fighter-indicator`),u=document.querySelector(`.arena___${r.side}-fighter`),p=s({tagName:"span",className:`arena__attacking-${r.side}-fighter-attacker`});p.innerText="SUPER Punch!",u.append(p),u.classList.add(`fighter-${r.side}-animation`),p.addEventListener("animationend",()=>{u.classList.remove(`fighter-${r.side}-animation`)}),c.currentHealth-=g/c.health*100,f.style.width=`${c.currentHealth}%`,c.currentHealth<50&&(f.style.backgroundColor="#FF0000"),c.currentHealth<=0&&(f.style.width="0%",document.querySelector(`.arena___${c.side}-fighter`).classList.add(`fighter_${c.side}_lost`),document.removeEventListener("keydown",v),document.removeEventListener("keyup",b),n(r))}}function l(r){if(!r.allowToBlock)return;const c=document.querySelector(`.arena___${r.side}-fighter`),m=document.querySelector(`.arena__blocking-${r.side}-fighter`);if(!r.isBlocking){if(!m)return;m.remove();return}if(m)return;const g=s({tagName:"span",className:`arena__blocking-${r.side}-fighter`});g.innerText="Block!",c.append(g)}function N(r,c){if(r.isBlocking||c.isBlocking)return;const m=document.querySelector(`.arena__attacking-${r.side}-fighter`);if(m){m.remove();return}const g=document.querySelector(`#${c.side}-fighter-indicator`),f=document.querySelector(`.arena___${r.side}-fighter`),u=s({tagName:"span",className:`arena__attacking-${r.side}-fighter`});u.innerText="Punch!",f.append(u);const p=D(r,c);c.currentHealth-=p/c.health*100,g.style.width=`${c.currentHealth}%`,c.currentHealth<50&&(g.style.backgroundColor="#FF0000"),c.currentHealth<=0&&(g.style.width="0%",document.querySelector(`.arena___${c.side}-fighter`).classList.add(`fighter_${c.side}_lost`),document.removeEventListener("keydown",v),document.removeEventListener("keyup",b),n(r))}function b(r){switch(d.PlayerOneCriticalHitCombination.includes(r.code)?(a[r.code]=!1,i.allowToBlock=!0):d.PlayerTwoCriticalHitCombination.includes(r.code)&&(i[r.code]=!1,a.allowToBlock=!0),r.code){case d.PlayerOneBlock:a.isBlocking=!1,l(a);break;case d.PlayerTwoBlock:i.isBlocking=!1,l(i);break;case d.PlayerOneAttack:N(a,i);break;case d.PlayerTwoAttack:N(i,a);break}}function v(r){if(d.PlayerOneCriticalHitCombination.includes(r.code)){a[r.code]=!0,i.isBlocking=!1,l(i),o(a,i);return}if(d.PlayerTwoCriticalHitCombination.includes(r.code)){i[r.code]=!0,a.isBlocking=!1,l(a),o(i,a);return}switch(r.code){case d.PlayerOneBlock:a.isBlocking=!0,l(a);break;case d.PlayerTwoBlock:i.isBlocking=!0,l(i);break}}document.addEventListener("keydown",v),document.addEventListener("keyup",b)})}function q({attack:e}){const t=Math.random()+1;return e*t}function M({defense:e}){const t=Math.random()+1;return e*t}function D(e,t){const n=q(e)-M(t);return n>0?n:0}function T(e){const{source:t,name:n}=e;return s({tagName:"img",className:"fighter-preview___img",attributes:{src:t,title:n,alt:n}})}function P(e,t){const a=s({tagName:"div",className:`fighter-preview___root ${t==="right"?"fighter-preview___right":"fighter-preview___left"}`});if(e){const i=T(e),o=s({tagName:"ul",className:"fighter-preview__info"});o.innerHTML=`<li>Name: ${e.name}</li>
        <li>Health: ${e.health}</li>
        <li>Defense: ${e.defense}</li>
        <li>Attack: ${e.attack}</li>`,a.append(i),a.append(o)}return a}function x(){return document.getElementById("root")}function j(){const e=document.getElementsByClassName("modal-layer")[0];e==null||e.remove()}function R(e,t){const n=s({tagName:"div",className:"modal-header"}),a=s({tagName:"span"}),i=s({tagName:"div",className:"close-btn"});a.innerText=e,i.innerText="Ã—";const o=()=>{j(),t()};return i.addEventListener("click",o),n.append(a,i),n}function U({title:e,bodyElement:t,onClose:n}){const a=s({tagName:"div",className:"modal-layer"}),i=s({tagName:"div",className:"modal-root"}),o=R(e,n);return i.append(o,t),a.append(i),a}function W({title:e,bodyElement:t,onClose:n=()=>{}}){const a=x(),i=U({title:e,bodyElement:t,onClose:n});a.append(i)}function G(e){const t=s({tagName:"div",className:"modal-winner__container"}),n=T(e);t.appendChild(n),W({title:`${e.name} is the winner!`,bodyElement:t,onClose:()=>document.location.reload()})}function F(e,t){const n=T(e),i=s({tagName:"div",className:`arena___fighter ${t==="right"?"arena___right-fighter":"arena___left-fighter"}`});return i.append(n),i}function J(e,t){const n=s({tagName:"div",className:"arena___battlefield"}),a=F(e,"left"),i=F(t,"right");return n.append(a,i),n}function $(e,t){const{name:n}=e,a=s({tagName:"div",className:"arena___fighter-indicator"}),i=s({tagName:"span",className:"arena___fighter-name"}),o=s({tagName:"div",className:"arena___health-indicator"}),l=s({tagName:"div",className:"arena___health-bar",attributes:{id:`${t}-fighter-indicator`}});return i.innerText=n,o.append(l),a.append(i,o),a}function Q(e,t){const n=s({tagName:"div",className:"arena___fight-status"}),a=s({tagName:"div",className:"arena___versus-sign"}),i=$(e,"left"),o=$(t,"right");return n.append(i,a,o),n}function Y(e){const t=s({tagName:"div",className:"arena___root"}),n=Q(...e),a=J(...e);return t.append(n,a),t}function Z(e){const t=document.getElementById("root"),n=Y(e),[a,i]=e;t.innerHTML="",t.append(n),A(a,i).then(o=>G(o))}const V="/assets/versus-768a076e.png",z=[{_id:"1",name:"Ryu",source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}],X=[{_id:"1",name:"Ryu",health:45,attack:4,defense:3,source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",health:60,attack:3,defense:1,source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",health:45,attack:4,defense:3,source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",health:60,attack:4,defense:1,source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",health:45,attack:3,defense:4,source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",health:45,attack:5,defense:4,source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}];function ee(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf(".json"),a=e.substring(t+1,n);return X.find(i=>i._id===a)}async function te(e){const t=e==="fighters.json"?z:ee(e);return new Promise((n,a)=>{setTimeout(()=>t?n(t):a(Error("Failed to load")),500)})}async function K(e,t="GET"){return te(e)}var y,w;class ne{constructor(){B(this,y,"fighters.json");B(this,w,"details/fighter/")}async getFighters(){try{return await K(E(this,y))}catch(t){throw t}}async getFighterDetails(t){try{return await K(`${E(this,w)}${t}.json`)}catch(n){throw n}}}y=new WeakMap,w=new WeakMap;const H=new ne,C=new Map;async function ie(e){if(!C.has(e)){const t=await H.getFighterDetails(e);return C.set(e,t),t}return C.get(e)}function ae(e){Z(e)}function re(e){const t=e.filter(Boolean).length===2,n=()=>ae(e),a=s({tagName:"div",className:"preview-container___versus-block"}),i=s({tagName:"img",className:"preview-container___versus-img",attributes:{src:V}}),l=s({tagName:"button",className:`preview-container___fight-btn ${t?"":"disabled"}`});return l.addEventListener("click",n,!1),l.innerText="Fight",a.append(i,l),a}function oe(e){const t=document.querySelector(".preview-container___root"),[n,a]=e,i=P(n,"left"),o=P(a,"right"),l=re(e);t.innerHTML="",t.append(i,l,o)}function se(){let e=[];return async(t,n)=>{const a=await ie(n),[i,o]=e;e=[i??a,i?o??a:o],oe(e)}}function ce(e){const{source:t,name:n}=e;return s({tagName:"img",className:"fighter___fighter-image",attributes:{src:t,title:n,alt:n}})}function le(e,t){const n=s({tagName:"div",className:"fighters___fighter"}),a=ce(e),i=o=>t(o,e._id);return n.append(a),n.addEventListener("click",i,!1),n}function de(e){const t=se(),n=s({tagName:"div",className:"fighters___root"}),a=s({tagName:"div",className:"preview-container___root"}),i=s({tagName:"div",className:"fighters___list"}),o=e.map(l=>le(l,t));return i.append(...o),n.append(a,i),n}const h=class{static async startApp(){try{h.loadingElement.style.visibility="visible";const t=await H.getFighters(),n=de(t);h.rootElement.appendChild(n)}catch(t){console.warn(t),h.rootElement.innerText="Failed to load data"}finally{h.loadingElement.style.visibility="hidden"}}};let _=h;k(_,"rootElement",document.getElementById("root")),k(_,"loadingElement",document.getElementById("loading-overlay"));_.startApp();
